{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.13.7/.schema/devbox.schema.json",
  "packages": {
    "dotnet-sdk_10": {
      "version": "latest"
    },
    "postgresql": {
      "version": "latest"
    },
    "docker": {
      "version": "latest"
    }
  },
  "shell": {
    "init_hook": [
      "echo -e \"\\n\\033[33mInfo:\\033[0m Importing BACKEND environment variables from root .env.\\n\"",
      "REPO_ROOT=$(git rev-parse --show-toplevel)",
      "set -a",
      "source <(grep '^BACKEND_' \"$REPO_ROOT/.env\" | sed 's/^BACKEND_//')",
      "set +a",
      "grep '^BACKEND_' \"$REPO_ROOT/.env\" | sed 's/^BACKEND_//'",
      "echo -e \"\\n\\033[33mInfo:\\033[0m Checking dependencies via .NET.\\n\"",
      "dotnet restore ElaviewBackend.csproj",
      "echo -e \"\\n\\033[32mInfo:\\033[0m Welcome to Devbox Shell!\""
    ],
    "scripts": {
      "env": [
        "REPO_ROOT=$(git rev-parse --show-toplevel)",
        "grep '^BACKEND_' \"$REPO_ROOT/.env\" | sed 's/^BACKEND_//' > .env"
      ],
      "start": [
        "docker compose up --build -d"
      ],
      "stop": [
        "docker compose down --remove-orphans"
      ],
      "logs": [
        "docker compose logs -f"
      ],
      "psql": [
        "docker compose exec postgres psql -U ${DATABASE_USER} -d ${DATABASE_USER}"
      ]
    }
  },
  "env": {
  }
}