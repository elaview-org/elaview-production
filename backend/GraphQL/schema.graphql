schema {
  query: Query
}

type AdvertiserProfile {
  id: String!
  userId: String!
  companyName: String
  industry: String
  website: String
  stripeCustomerId: String
  createdAt: DateTime!
  updatedAt: DateTime!
  user: User!
}

type Booking {
  id: String!
  campaignId: String!
  spaceId: String!
  startDate: DateTime!
  endDate: DateTime!
  totalDays: Int!
  pricePerDay: Decimal!
  totalAmount: Decimal!
  platformFee: Decimal!
  stripeFee: Decimal
  totalWithFees: Decimal
  status: BookingStatus!
  stripePaymentIntentId: String
  paidAt: DateTime
  proofPhotos: [String!]!
  proofUploadedAt: DateTime
  proofApprovedAt: DateTime
  proofApprovedBy: String
  firstPayoutProcessed: Boolean!
  firstPayoutDate: DateTime
  firstPayoutAmount: Decimal
  finalPayoutProcessed: Boolean!
  finalPayoutDate: DateTime
  finalPayoutAmount: Decimal
  verificationSchedule: JsonDocument
  verificationPhotos: JsonDocument
  nextVerificationDue: DateTime
  missedVerifications: Int!
  reservedUntil: DateTime
  advertiserNotes: String
  ownerNotes: String
  adminNotes: String
  createdAt: DateTime!
  updatedAt: DateTime!
  balanceAmount: Decimal
  balanceChargeId: String
  balanceDueDate: DateTime
  balancePaidAt: DateTime
  cancellationReason: String
  cancelledAt: DateTime
  cancelledBy: String
  depositAmount: Decimal
  depositChargeId: String
  depositPaidAt: DateTime
  stripeChargeId: String
  depositStripeChargeId: String
  balanceStripeChargeId: String
  paymentType: PaymentType!
  proofMessageId: String
  proofStatus: ProofStatus
  qualityGuaranteePeriod: DateTime
  refundAmount: Decimal
  refundProcessedAt: DateTime
  spaceOwnerAmount: Decimal!
  stripeTransferId: String
  transferAmount: Decimal
  transferredAt: DateTime
  disputeReason: String
  disputedAt: DateTime
  payoutError: String
  payoutProcessedAt: DateTime
  refundedAt: DateTime
  stripeRefundId: String
  balanceChargeAttempts: Int!
  balanceChargeError: String
  checkpointTransferIds: [String!]!
  finalTransferId: String
  finalTransferredAt: DateTime
  firstRentalTransferId: String
  firstRentalTransferredAt: DateTime
  installationFeeTransferId: String
  installationFeeTransferredAt: DateTime
  lastBalanceChargeAttempt: DateTime
  lastPayoutAttempt: DateTime
  payoutAttempts: Int!
  payoutStatus: PayoutStatus
  refundHistory: JsonDocument
  pendingPayoutReason: String
  isTestData: Boolean!
  disputedBy: String
  disputePhotos: [String!]!
  disputeType: DisputeIssueType
  resolvedBy: String
  resolvedAt: DateTime
  resolutionNotes: String
  resolutionAction: String
  campaign: Campaign!
  space: Space!
  messages: [Message!]!
  review: Review
}

type BugReport {
  id: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  userId: String
  user: User
  title: String!
  description: String!
  pageUrl: String
  userAgent: String
  screenshots: [String!]!
  category: BugCategory!
  severity: BugSeverity!
  status: BugStatus!
  adminNotes: String
  linkedBugId: String
  processedAt: DateTime
  processedBy: String
}

type Campaign {
  id: String!
  advertiserId: String!
  name: String!
  description: String
  imageUrl: String!
  targetAudience: String
  goals: String
  totalBudget: Decimal
  status: CampaignStatus!
  startDate: DateTime
  endDate: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  advertiser: User!
  bookings: [Booking!]!
  messages: [Message!]!
}

type DeviceSession {
  id: String!
  device: String!
  location: String!
  lastActive: DateTime!
  current: Boolean!
}

type JsonDocument {
  rootElement: JSON!
}

type Message {
  id: String!
  campaignId: String!
  senderId: String!
  content: String!
  isRead: Boolean!
  attachments: [String!]!
  createdAt: DateTime!
  bookingId: String
  disputeReason: String
  messageType: MessageType!
  proofApprovedAt: DateTime
  autoApprovedAt: DateTime
  proofApprovedBy: String
  proofDisputedAt: DateTime
  proofStatus: ProofStatus
  attemptedResolution: String
  correctionDetails: String
  issueType: DisputeIssueType
  booking: Booking
  campaign: Campaign!
  sender: User!
}

type Notification {
  id: String!
  userId: String!
  type: NotificationType!
  title: String!
  content: String!
  isRead: Boolean!
  campaignId: String
  bookingId: String
  createdAt: DateTime!
  user: User!
}

type NotificationSettings {
  bookingRequests: Boolean!
  bookingApprovals: Boolean!
  paymentReceipts: Boolean!
  campaignUpdates: Boolean!
  marketingEmails: Boolean!
  systemNotifications: Boolean!
  emailDigest: String!
}

type Query {
  currentUser: User! @cost(weight: "10")
  notificationSettings: NotificationSettings!
  securitySettings: SecuritySettings!
}

type Review {
  id: String!
  bookingId: String!
  spaceId: String!
  rating: Int!
  comment: String
  reviewerType: ReviewerType!
  createdAt: DateTime!
  booking: Booking!
  space: Space!
}

type SecuritySettings {
  twoFactorEnabled: Boolean!
  loginNotifications: Boolean!
  deviceSessions: [DeviceSession!]!
}

type Space {
  id: String!
  ownerId: String!
  title: String!
  description: String
  type: SpaceType!
  status: SpaceStatus!
  address: String!
  city: String!
  state: String!
  zipCode: String
  latitude: Float!
  longitude: Float!
  width: Float
  height: Float
  dimensions: String
  pricePerDay: Decimal!
  installationFee: Decimal
  minDuration: Int!
  maxDuration: Int
  images: [String!]!
  availableFrom: DateTime
  availableTo: DateTime
  totalBookings: Int!
  totalRevenue: Decimal!
  averageRating: Float
  createdAt: DateTime!
  updatedAt: DateTime!
  dimensionsText: String
  rejectionReason: String
  traffic: String
  quadtreeNodeId: String
  quadtreeDepth: Int
  owner: User!
  bookings: [Booking!]!
  reviews: [Review!]!
}

type SpaceOwnerProfile {
  id: String!
  userId: String!
  businessName: String
  businessType: String
  stripeAccountId: String
  payoutSchedule: PayoutSchedule!
  onboardingComplete: Boolean!
  stripeAccountStatus: String
  lastAccountHealthCheck: DateTime
  accountDisconnectedAt: DateTime
  accountDisconnectedNotifiedAt: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  user: User!
}

type User {
  id: String
  email: String!
  password: String!
  name: String
  phone: String
  avatar: String
  role: UserRole!
  status: UserStatus!
  createdAt: DateTime!
  updatedAt: DateTime!
  lastLoginAt: DateTime
  advertiserProfile: AdvertiserProfile
  spaceOwnerProfile: SpaceOwnerProfile
  campaigns: [Campaign!]!
  sentMessages: [Message!]!
  notifications: [Notification!]!
  ownedSpaces: [Space!]!
  bugReports: [BugReport!]!
}

enum BookingStatus {
  PENDING_APPROVAL
  APPROVED
  CONFIRMED
  ACTIVE
  AWAITING_PROOF
  COMPLETED
  CANCELLED
  REJECTED
  PENDING_BALANCE
  DISPUTED
}

enum BugCategory {
  UI_UX
  PAYMENT
  MESSAGING
  AUTHENTICATION
  BOOKING
  SPACE_MANAGEMENT
  CAMPAIGN
  NOTIFICATIONS
  PERFORMANCE
  DATA_INTEGRITY
  OTHER
}

enum BugSeverity {
  CRITICAL
  HIGH
  MEDIUM
  LOW
}

enum BugStatus {
  NEW
  CONFIRMED
  IN_PROGRESS
  FIXED
  WONT_FIX
  DUPLICATE
}

enum CampaignStatus {
  DRAFT
  SUBMITTED
  ACTIVE
  COMPLETED
  CANCELLED
}

enum DisputeIssueType {
  WRONG_LOCATION
  POOR_QUALITY
  DAMAGE_TO_CREATIVE
  NOT_VISIBLE
  SAFETY_ISSUE
  MISLEADING_LISTING
}

enum MessageType {
  TEXT
  PROOF_SUBMISSION
  PROOF_APPROVED
  PROOF_DISPUTED
  SYSTEM
  PROOF_REJECTED
  CORRECTION_REQUEST
  QUALITY_CONCERN
}

enum NotificationType {
  BOOKING_REQUESTED
  BOOKING_APPROVED
  BOOKING_REJECTED
  PAYMENT_RECEIVED
  PROOF_UPLOADED
  MESSAGE_RECEIVED
  SYSTEM_UPDATE
  PAYOUT_PROCESSED
  SPACE_APPROVED
  SPACE_REJECTED
  SPACE_SUSPENDED
  SPACE_REACTIVATED
  SESSION_EXPIRED
  PAYMENT_FAILED
  PROOF_APPROVED
  PROOF_DISPUTED
  PROOF_REJECTED
  REFUND_PROCESSED
  BOOKING_CANCELLED
  PAYMENT_REMINDER
  DISPUTE_FILED
}

enum PaymentType {
  IMMEDIATE
  DEPOSIT
}

enum PayoutSchedule {
  WEEKLY
  BIWEEKLY
  MONTHLY
}

enum PayoutStatus {
  PENDING
  PROCESSING
  PARTIALLY_PAID
  COMPLETED
  FAILED
}

enum ProofStatus {
  PENDING
  APPROVED
  DISPUTED
  REJECTED
  UNDER_REVIEW
  CORRECTION_REQUESTED
}

enum ReviewerType {
  ADVERTISER
  SPACE_OWNER
}

enum SpaceStatus {
  ACTIVE
  INACTIVE
  PENDING_APPROVAL
  SUSPENDED
  REJECTED
}

enum SpaceType {
  BILLBOARD
  STOREFRONT
  TRANSIT
  DIGITAL_DISPLAY
  WINDOW_DISPLAY
  VEHICLE_WRAP
  OTHER
}

enum UserRole {
  ADVERTISER
  SPACE_OWNER
  ADMIN
  MARKETING
}

enum UserStatus {
  ACTIVE
  SUSPENDED
  DELETED
}

"The purpose of the `cost` directive is to define a `weight` for GraphQL types, fields, and arguments. Static analysis can use these weights when calculating the overall cost of a query or response."
directive @cost("The `weight` argument defines what value to add to the overall cost for every appearance, or possible appearance, of a type, field, argument, etc." weight: String!) on SCALAR | OBJECT | FIELD_DEFINITION | ARGUMENT_DEFINITION | ENUM | INPUT_FIELD_DEFINITION

"The `@specifiedBy` directive is used within the type system definition language to provide a URL for specifying the behavior of custom scalar definitions."
directive @specifiedBy("The specifiedBy URL points to a human-readable specification. This field will only read a result for scalar types." url: String!) on SCALAR

"The `DateTime` scalar represents an ISO-8601 compliant date time type."
scalar DateTime @specifiedBy(url: "https:\/\/www.graphql-scalars.com\/date-time")

"The `Decimal` scalar type represents a decimal floating-point number."
scalar Decimal

scalar JSON